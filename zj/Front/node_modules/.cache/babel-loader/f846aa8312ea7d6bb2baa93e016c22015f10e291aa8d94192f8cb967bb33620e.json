{"ast":null,"code":"import axios from 'axios';\nimport EditorDemo from \"@/components/EditorDemo.vue\";\nexport default {\n  components: {\n    EditorDemo\n  },\n  data() {\n    return {\n      editor: null,\n      //服务端地址\n      serverUrl: 'http://localhost/post'\n    };\n  },\n  methods: {\n    //初始化前\n    onAfterInit: function (e) {\n      this.editor = e.editor;\n    },\n    //仅保存HTML文档\n    saveHtml: function () {\n      let data = {\n        'doc': this.editor.getHtml()\n      };\n      axios.post(this.serverUrl, data).then(res => {\n        console.log('res=>', res);\n      });\n    },\n    //保存文档及机构化数据\n    saveHtmlAndData: function () {\n      let data = {\n        'doc': this.editor.getHtml(),\n        'data': this.editor.getBindObject()\n      };\n      const blob = new Blob([data.doc], {\n        type: 'text/html'\n      }); // 指定类型为HTML\n\n      // 创建一个下载链接\n      const url = window.URL.createObjectURL(blob);\n\n      // 创建一个链接元素\n      const link = document.createElement('a');\n      link.href = url;\n\n      // 设置文件名为doc.html\n      link.setAttribute('download', 'res.pdc');\n\n      // 将链接元素添加到文档中\n      document.body.appendChild(link);\n\n      // 模拟用户点击链接进行下载\n      link.click();\n\n      // 下载完成后释放URL对象\n      window.URL.revokeObjectURL(url);\n    }\n  }\n};","map":{"version":3,"names":["axios","EditorDemo","components","data","editor","serverUrl","methods","onAfterInit","e","saveHtml","getHtml","post","then","res","console","log","saveHtmlAndData","getBindObject","blob","Blob","doc","type","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","revokeObjectURL"],"sources":["/Users/jiezhou/IdeaProjects/graduaction/zj/Front/src/views/SaveDoc.vue"],"sourcesContent":["\n<template>\n    <el-row>\n        <el-col :span=\"2\" style=\"vertical-align: center;\">服务器地址：</el-col>\n        <el-col :span=\"10\"><el-input v-model=\"serverUrl\" ></el-input></el-col>\n        <el-col :span=\"1\"></el-col>\n        <el-col :span=\"2\"><el-button plain type=\"primary\" @click=\"saveHtml\">保存文档</el-button></el-col>\n        <el-col :span=\"2\"> <el-button plain type=\"primary\" @click=\"saveHtmlAndData\">保存数据&文档</el-button></el-col>\n    </el-row>\n    <Source src=\"/code/SaveDoc.vue\"></Source>\n    <EditorDemo @AfterInit=\"onAfterInit\" doc=\"https://www.x-emr.cn/doc/999.html\" style=\"margin: 10px 0;\"></EditorDemo>\n\n</template>\n    \n<script>\n    import axios from 'axios'\n    import EditorDemo from \"@/components/EditorDemo.vue\";\n\n    export default{\n      components: {EditorDemo},\n        data(){\n            return{\n                editor:null,\n                 //服务端地址\n                serverUrl:'http://localhost/post'\n            }\n        },\n        methods:{\n            //初始化前\n            onAfterInit: function(e) {\n                this.editor = e.editor\n            },\n            //仅保存HTML文档\n            saveHtml: function() {\n                let data = {'doc': this.editor.getHtml()}\n                axios.post(this.serverUrl, data).then(res=>{\n                    console.log('res=>',res)\n                })\n            },\n            //保存文档及机构化数据\n            saveHtmlAndData: function() {\n                let data = {\n                    'doc': this.editor.getHtml(),\n                    'data': this.editor.getBindObject()\n                }\n\n              const blob = new Blob([data.doc], { type: 'text/html' }); // 指定类型为HTML\n\n              // 创建一个下载链接\n              const url = window.URL.createObjectURL(blob);\n\n              // 创建一个链接元素\n              const link = document.createElement('a');\n              link.href = url;\n\n              // 设置文件名为doc.html\n              link.setAttribute('download', 'res.pdc');\n\n              // 将链接元素添加到文档中\n              document.body.appendChild(link);\n\n              // 模拟用户点击链接进行下载\n              link.click();\n\n              // 下载完成后释放URL对象\n              window.URL.revokeObjectURL(url);\n            },\n        }\n\n}\n</script>"],"mappings":"AAeI,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,UAAS,MAAO,6BAA6B;AAEpD,eAAc;EACZC,UAAU,EAAE;IAACD;EAAU,CAAC;EACtBE,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,MAAM,EAAC,IAAI;MACV;MACDC,SAAS,EAAC;IACd;EACJ,CAAC;EACDC,OAAO,EAAC;IACJ;IACAC,WAAW,EAAE,SAAAA,CAASC,CAAC,EAAE;MACrB,IAAI,CAACJ,MAAK,GAAII,CAAC,CAACJ,MAAK;IACzB,CAAC;IACD;IACAK,QAAQ,EAAE,SAAAA,CAAA,EAAW;MACjB,IAAIN,IAAG,GAAI;QAAC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACM,OAAO,CAAC;MAAC;MACxCV,KAAK,CAACW,IAAI,CAAC,IAAI,CAACN,SAAS,EAAEF,IAAI,CAAC,CAACS,IAAI,CAACC,GAAG,IAAE;QACvCC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACF,GAAG;MAC3B,CAAC;IACL,CAAC;IACD;IACAG,eAAe,EAAE,SAAAA,CAAA,EAAW;MACxB,IAAIb,IAAG,GAAI;QACP,KAAK,EAAE,IAAI,CAACC,MAAM,CAACM,OAAO,CAAC,CAAC;QAC5B,MAAM,EAAE,IAAI,CAACN,MAAM,CAACa,aAAa,CAAC;MACtC;MAEF,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAAC,CAAChB,IAAI,CAACiB,GAAG,CAAC,EAAE;QAAEC,IAAI,EAAE;MAAY,CAAC,CAAC,EAAE;;MAE1D;MACA,MAAMC,GAAE,GAAIC,MAAM,CAACC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC;;MAE5C;MACA,MAAMQ,IAAG,GAAIC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,IAAG,GAAIP,GAAG;;MAEf;MACAI,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE,SAAS,CAAC;;MAExC;MACAH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;;MAE/B;MACAA,IAAI,CAACO,KAAK,CAAC,CAAC;;MAEZ;MACAV,MAAM,CAACC,GAAG,CAACU,eAAe,CAACZ,GAAG,CAAC;IACjC;EACJ;AAER"},"metadata":{},"sourceType":"module","externalDependencies":[]}