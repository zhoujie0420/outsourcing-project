{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  const _component_van_search = _resolveComponent(\"van-search\");\n  const _component_van_divider = _resolveComponent(\"van-divider\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"section\", null, [_createVNode(_component_van_nav_bar, {\n    title: \"视频问诊\",\n    fixed: \"\",\n    placeholder: \"\",\n    \"safe-area-inset-top\": \"\"\n  })]), _createElementVNode(\"section\", null, [_createVNode(_component_van_search, {\n    placeholder: \"请输入搜索关键词\"\n  })]), $setup.userInfos.length ? (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createVNode(_component_van_divider, null, {\n    default: _withCtx(() => [_createTextVNode(\"轻触即可视频问诊\")]),\n    _: 1 /* STABLE */\n  }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.userInfos, info => {\n    return _openBlock(), _createElementBlock(\"section\", {\n      key: info\n    }, [_createVNode($setup[\"FriendCard\"], {\n      onClick: $event => $setup.jumpToVideoCallCallingView(info.id)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(info.username) + \" / \" + _toDisplayString(info.departmentName || \"患者\"), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","_createVNode","_component_van_nav_bar","title","fixed","placeholder","_component_van_search","$setup","userInfos","length","_createElementBlock","_hoisted_1","_component_van_divider","_Fragment","_renderList","info","key","onClick","$event","jumpToVideoCallCallingView","id","username","_toDisplayString","departmentName"],"sources":["/Users/jiezhou/IdeaProjects/graduaction/zj/Front/src/views/FriendsListView.vue"],"sourcesContent":["<template>\n  <section>\n    <van-nav-bar title=\"视频问诊\" fixed placeholder safe-area-inset-top/>\n  </section>\n  <section>\n    <van-search placeholder=\"请输入搜索关键词\"/>\n  </section>\n  <section v-if=\"userInfos.length\">\n    <van-divider>轻触即可视频问诊</van-divider>\n    <section v-for=\"info of userInfos\" :key=\"info\">\n      <friend-card @click=\"jumpToVideoCallCallingView(info.id)\">\n        {{ info.username }} / {{ info.departmentName || \"患者\" }}\n      </friend-card>\n    </section>\n  </section>\n</template>\n\n<script setup>\nimport useFriendStore from \"@/store/friend\";\nimport usePeerStore from \"@/store/peer\";\nimport FriendCard from \"@/components/FriendCard.vue\";\nimport {useRouter} from \"vue-router\";\nimport {showToast} from \"vant\";\nimport {apiUrl} from \"../../config\";\nimport $ from \"jquery\";\nimport {ref} from \"vue\";\n\nlet friendStore = useFriendStore();\nconst peerStore = usePeerStore();\nlet router = useRouter();\ngetRole();\nlet userInfos = ref([]); // 创建响应式的userInfos\nfunction jumpToVideoCallCallingView(calleePeerId) {\n  console.log(\"peerStore.localPeer\" + peerStore.localPeer);\n  if (peerStore.localPeer && peerStore.localPeer.open) {\n    if (peerStore.dataConnection) {\n      showToast(\"currently busy\");\n    } else {\n      router.push({\n        path: \"/video-call-calling-view\",\n        query: {\n          calleePeerId\n        }\n      });\n    }\n  } else {\n    console.log(\"calleePeerId\" + calleePeerId);\n    showToast(\"local peer not opened\");\n  }\n}\n\nfunction getRole() {\n  $.ajax({\n    url: `${apiUrl}/api/user/account/getRole/`,\n    type: \"post\",\n    data: {\n      userList: friendStore.onlineList,\n      userRole: peerStore.role,\n    },\n    headers: {\n      Authorization: \"Bearer \" + peerStore.token,\n    },\n    success(resp) {\n      if (resp.code === 200) {\n        userInfos.value = resp.data; // 更新userInfos的值\n      } else {\n        showToast(resp.message);\n      }\n    },\n  });\n}\n\n\n</script>"],"mappings":";;;;;;;;6DACEA,mBAAA,CAEU,kBADRC,YAAA,CAAiEC,sBAAA;IAApDC,KAAK,EAAC,MAAM;IAACC,KAAK,EAAL,EAAK;IAACC,WAAW,EAAX,EAAW;IAAC,qBAAmB,EAAnB;QAE9CL,mBAAA,CAEU,kBADRC,YAAA,CAAoCK,qBAAA;IAAxBD,WAAW,EAAC;EAAU,G,GAErBE,MAAA,CAAAC,SAAS,CAACC,MAAM,I,cAA/BC,mBAAA,CAOU,WAAAC,UAAA,GANRV,YAAA,CAAmCW,sBAAA;sBAAtB,MAAQ,C,iBAAR,UAAQ,E;;yBACrBF,mBAAA,CAIUG,SAAA,QAAAC,WAAA,CAJcP,MAAA,CAAAC,SAAS,EAAjBO,IAAI;yBAApBL,mBAAA,CAIU;MAJ0BM,GAAG,EAAED;IAAI,IAC3Cd,YAAA,CAEcM,MAAA;MAFAU,OAAK,EAAAC,MAAA,IAAEX,MAAA,CAAAY,0BAA0B,CAACJ,IAAI,CAACK,EAAE;;wBACrD,MAAmB,C,kCAAhBL,IAAI,CAACM,QAAQ,IAAG,KAAG,GAAAC,gBAAA,CAAGP,IAAI,CAACQ,cAAc,yB"},"metadata":{},"sourceType":"module","externalDependencies":[]}